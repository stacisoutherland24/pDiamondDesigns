<!-- product-detail.component.html -->
<div class="product-detail-container" *ngIf="!loading">
     <!-- Breadcrumb Navigation -->
     <div class="breadcrumb">
          <a routerLink="/wholesale">Wholesale Catalog</a> /
          <span>{{ product?.title }}</span>
     </div>

     <!-- Success/Error Messages -->
     <div *ngIf="addedMessage" class="alert alert-success alert-dismissible fade show mb-3" role="alert">
          <i class="bi bi-check-circle me-2"></i>{{ addedMessage }}
          <button type="button" class="btn-close" (click)="addedMessage = null" aria-label="Close"></button>
     </div>

     <div class="product-detail-content">
          <!-- Product Images Section -->
          <div class="product-images">
               <!-- Thumbnail Images -->
               <div class="thumbnail-images">
                    <div *ngFor="let image of product?.images; let i = index" class="thumbnail"
                         [class.selected]="i === selectedImageIndex" (click)="selectImage(i)">
                         <img [src]="image?.asset.url" [alt]="product?.title" />
                    </div>
               </div>

               <!-- Main Product Image -->
               <div class="main-image">
                    <img [src]="product?.images[selectedImageIndex]?.asset.url" [alt]="product?.title"
                         class="main-product-image" />
                    <div class="heart-icon" (click)="toggleFavorite()">
                         <i [class]="isFavorite() ? 'bi bi-heart-fill text-danger' : 'bi bi-heart'"></i>
                    </div>
               </div>
          </div>

          <!-- Product Information Section -->
          <div class="product-info">
               <h1 class="product-title">{{ product?.title }}</h1>

               <div class="product-price">
                    <span class="price">${{ product?.price }}</span>
                    <!-- Show total price when quantity > 1 -->
                    <span *ngIf="quantity > 1" class="total-price">
                         (Total: {{ getTotalPrice() }})
                    </span>
               </div>

               <!-- Product Description -->
               <div class="product-description" *ngIf="product?.description">
                    <h3>Description</h3>
                    <p>{{ product?.description }}</p>
               </div>

               <!-- Product Type -->
               <div class="product-type" *ngIf="product?.type">
                    <p><strong>Type:</strong> {{ product?.type }}</p>
               </div>

             <!--   Cart Status Information
               <div *ngIf="isInCart$ | async" class="cart-status-info mb-3 p-3 bg-light rounded border">
                    <div class="d-flex align-items-center">
                         <i class="bi bi-check-circle-fill text-success me-2"></i>
                         <span class="fw-semibold text-success">This item is in your cart</span>
                    </div>
                    <div *ngIf="cartItem$ | async as cartItem" class="mt-2 small text-muted">
                         Current quantity in cart: {{ cartItem.quantity }}
                    </div>
               </div> -->

            <!--     Quantity Selector 
               <div class="quantity-section">
                    <label for="quantity">Qty</label>
                    <div class="quantity-controls">
                         <button type="button" (click)="decreaseQuantity()" [disabled]="quantity <= 1">-</button>
                         <input type="number" id="quantity" [(ngModel)]="quantity" min="1" readonly>
                         <button type="button" (click)="increaseQuantity()">+</button>
                    </div>
               </div> -->

               <!-- Cart Action Buttons -->
               <!-- <div class="cart-actions">
                     Add to Cart Button (show when not in cart or user wants to add more) 
                    <button class="add-to-cart-btn" (click)="addToCart()" [disabled]="!product">
                         <i class="bi bi-cart-plus me-2"></i>
                         {{ (isInCart$ | async) ? 'Add More to Cart' : 'Add to Cart' }}
                    </button>

                     Cart Management Buttons (show when item is in cart) 
                    <div *ngIf="isInCart$ | async" class="cart-management-buttons mt-3">
                         <button class="view-cart-btn me-2" (click)="goToCart()">
                              <i class="bi bi-cart-check me-2"></i>
                              View Cart
                         </button>
                         <button class="remove-from-cart-btn" (click)="removeFromCart()">
                              <i class="bi bi-trash me-2"></i>
                              Remove from Cart
                         </button>
                    </div>
               </div> -->

               <!-- Back Button -->
               <button class="back-btn" (click)="goBack()">
                    <i class="bi bi-arrow-left"></i> Back to Wholesale Catalog
               </button>
          </div>
     </div>

     <!-- Disclaimer -->
     <p class="disclaimer-text">
          *Disclaimer â€” Prices on products are subject to change due to the rising market costs of
          product materials. If you have any questions or concerns regarding pricing, please contact me.
          Thank you for understanding.
     </p>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
     <div class="loading-spinner"></div>
     <p>Loading product details...</p>
</div>